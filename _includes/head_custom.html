<script>
    document.addEventListener("DOMContentLoaded", function () {
        const path = window.location.pathname;
        const isPt = path.includes("/pt/") || path.endsWith("/pt");
        const currentLang = isPt ? "pt" : "en";
        const pathParts = path.split('/');
        const baseurl = '/' + pathParts[1];

        document.querySelectorAll('.nav-list-item').forEach(item => {
            const link = item.querySelector('.nav-list-link');
            if (!link) return;

            const href = link.getAttribute('href') || '';
            const text = link.textContent.trim().toLowerCase();

            if (text === 'english' || text === 'portuguÃªs') {
                item.classList.add('lang-parent-hidden');
                return;
            }

            let itemLang = "common";
            if (href.includes("/pt/") || href.endsWith("/pt")) itemLang = "pt";
            else if (href.includes("/en/") || href.endsWith("/en")) itemLang = "en";

            if ((currentLang === "pt" && itemLang === "en") ||
                (currentLang === "en" && itemLang === "pt")) {
                item.classList.add('lang-hidden');
            }
        });

        const auxNav = document.querySelector('.aux-nav-list');
        if (auxNav) {
            const toggle = document.createElement('li');
            toggle.className = 'aux-nav-list-item lang-toggle-wrapper';
            toggle.innerHTML = `
            <div class="lang-toggle">
                <a href="${baseurl}/en/" class="${currentLang === 'en' ? 'active' : ''}">EN</a>
                <a href="${baseurl}/pt/" class="${currentLang === 'pt' ? 'active' : ''}">PT</a>
            </div>
        `;
            auxNav.insertBefore(toggle, auxNav.firstChild);
        }
    });
</script>